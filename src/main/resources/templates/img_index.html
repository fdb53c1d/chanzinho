<!DOCTYPE html>
<html th:manifest="@{~/manifest.appcache}" xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <title th:text="|/${board.name}/ - ${board.desc}|"></title>
    <link rel="shortcut icon" th:href="@{~/assets/favicon.png}" />
    <link rel="stylesheet" type="text/css" th:href="@{~/css/img_global.css}" />
    <link rel="stylesheet" type="text/css" th:href="@{~/css/estilinho.css}" />
  </head>
  <body>
    <nav class="navtop">
      <ul th:each="section : ${boardList}" th:if="${not #lists.isEmpty(section.value)}">
        <li th:each="board : ${section.value}">
          <a th:href="@{~/__${board.name}__}" th:text="${board.name}"></a>
        </li>
      </ul>
    </nav>
    <header>
      <img th:src="@{~/banners/__${banner}__}" />
      <h2 th:text="|/${board.name}/ - ${board.desc}|"></h2>
    </header>
    <main>
      <section class="formarea">
        <form th:action="@{~/board.php}" method="post" enctype="multipart/form-data">
          <input type="hidden" name="board" th:value="${board.name}" />
          <input type="hidden" name="replythread" value="0" />
          <table class="formtable">
            <tr>
              <th>Nome</th>
              <td><input type="text" name="name" size="28" maxlength="75"></input></td>
            </tr>
            <tr>
              <th>Email</th>
              <td><input type="text" name="em" size="28" maxlength="75"></input></td>
            </tr>
            <tr>
              <th>Assunto</th>
              <td><input type="text" name="subject" size="35" maxlength="75"></input><input type="submit" value="Abrir Threadzinha"></input></td>
            </tr>
            <tr>
              <th>Mensagem</th>
              <td><textarea name="message" cols="48" rows="4"></textarea></td>
            </tr>
            <tr>
              <th>Arquivo</th>
              <td><input type="file" name="imagefile" size="35" accept="image/*"></input></td>
            </tr>
            <tr>
              <th>Senha</th>
              <td><input type="password" name="postpassword" th:value="${postpassword}" size="8"></input></td>
            </tr>
          </table>
        </form>
      </section>
      <form th:action="@{~/board.php}" method="post">
      <section class="postarea">
        <article th:each="op : ${ops}" th:with="post = ${op.key}">
          <div class="op" th:id="'post' + ${post.id}">
            <div class="fileinfo" th:if="${post.fileType} != ''">
              <span th:text="'Arquivo: '"></span>
              <a th:href="@{~/__${board.name}__/src/__${post.file}__.__${post.fileType}__}" th:text="|${post.file}.${post.fileType}|"></a>
              <span th:text="| - (${post.fileSizeFormatted}, ${post.imageW}x${post.imageH}, ${post.fileOriginal}.${post.fileType})|"></span>
            </div>
            <div class="image" th:if="${post.fileType} != ''">
              <figure>
                <a target="_blank" th:href="@{~/__${board.name}__/src/__${post.file}__.__${post.fileType}__}">
                <img th:if="${post.fileType == 'webm' or post.fileType == 'mp4'}" th:src="@{~/__${board.name}__/thumb/__${post.file}__s.jpg}" th:alt="${post.id}" class="thumb" th:height="${post.thumbH}" th:width="${post.thumbW}" />
                <img th:if="${post.fileType != 'webm' and post.fileType != 'mp4'}" th:src="@{~/__${board.name}__/thumb/__${post.file}__s.__${post.fileType}__}" th:alt="${post.id}" class="thumb" th:height="${post.thumbH}" th:width="${post.thumbW}" />
                </a>
              </figure>
            </div>
            <div class="postinfo">
              <input type="checkbox" th:value="${post.id}"></input>
              <span class="subject" th:text="${post.subject}"></span>
              <span class="postername" th:if="${post.name} == ''" th:text="${board.anonymous}"></span>
              <span class="postername" th:if="${post.name} != ''" th:text="${post.name}"></span>
              <span class="tripcode" th:if="${post.tripcode} != ''" th:text="${post.tripcode}"></span>
              <span class="capcode"></span>
              <time th:text="${#calendars.format(post.getDate(), 'dd/MM/yyyy(EEE)HH:mm')}"></time>
              <span>
                <a th:href="@{~/__${board.name}__/res/__${post.id}__.html#post__${post.id}__}" th:text="No."></a>
                <a th:href="@{~/__${board.name}__/res/__${post.id}__.html#post__${post.id}__}" th:text="${post.id}"></a>
                <a th:href="@{~/__${board.name}__/res/__${post.id}__.html}" th:text="[Responder]"></a>
              </span>
            </div>
            <div class="message">
              <p th:utext="${post.message}"></p>
            </div>
          </div>
          <div class="reply" th:each="reply : ${op.value}" th:id="'post' + ${reply.id}">
            <div class="postinfo">
              <input type="checkbox" value="${reply.id}"></input>
              <span class="subject" th:text="${reply.subject}"></span>
              <span class="postername" th:if="${reply.name} == ''" th:text="${board.anonymous}"></span>
              <span class="postername" th:if="${reply.name} != ''" th:text="${reply.name}"></span>
              <span class="tripcode" th:if="${reply.tripcode} != ''" th:text="${reply.tripcode}"></span>
              <span class="capcode"></span>
              <time th:text="${#calendars.format(reply.getDate(), 'dd/MM/yyyy(EEE)HH:mm')}"></time>
              <span>
                <a th:href="@{~/__${board.name}__/res/__${post.id}__.html#post__${reply.id}__}" th:text="No."></a>
                <a th:href="@{~/__${board.name}__/res/__${post.id}__.html#post__${reply.id}__}" th:text="${reply.id}"></a>
              </span>
            </div>
            <div class="fileinfo" th:if="${reply.fileType} != ''">
              <span th:text="'Arquivo: '"></span>
              <a th:href="@{~/__${board.name}__/src/__${reply.file}__.__${reply.fileType}__}" th:text="|${reply.file}.${reply.fileType}|"></a>
              <span th:text="| - (${reply.fileSizeFormatted}, ${reply.imageW}x${reply.imageH}, ${reply.fileOriginal}.${reply.fileType})|"></span>
            </div>
            <div class="image"  th:if="${reply.fileType} != ''">
              <figure>
                <a target="_blank" th:href="@{~/__${board.name}__/src/__${reply.file}__.__${reply.fileType}__}">
                <img th:if="${reply.fileType == 'webm' or reply.fileType == 'mp4'}" th:src="@{~/__${board.name}__/thumb/__${reply.file}__s.jpg}" th:alt="${reply.id}" class="thumb" th:height="${reply.thumbH}" th:width="${reply.thumbW}" />
                <img th:if="${reply.fileType != 'webm' and reply.fileType != 'mp4'}" th:src="@{~/__${board.name}__/thumb/__${reply.file}__s.__${reply.fileType}__}" th:alt="${reply.id}" class="thumb" th:height="${reply.thumbH}" th:width="${reply.thumbW}" />
                </a>
              </figure>
            </div>
            <div class="message">
              <p th:utext="${reply.message}"></p>
            </div>
          </div>
        </article>
      </section>
      <section class="bottom">
        <table>
          <tr>
            <td>
              <form th:if="${page} &gt; 1" th:action="@{~/__${board.name}__/__${page-1}__.html}" method="get">
                <input type="submit" value="Anterior"></input>
              </form>
              <span th:if="${page} == 1">Anterior</span>
            </td>
            <td class="pagelist">
              <ul>
                <li th:each="i : ${#numbers.sequence(1, maxpages)}">
                  <a th:if="${page} != ${i}" th:href="@{~/__${board.name}__/__${i}__.html}" th:text="${i}"></a>
                  <span th:if="${page} == ${i}" th:text="${i}"></span>
                </li>
              </ul>
            </td>
            <td>
              <form th:if="${page} &lt; ${maxpages}" th:action="@{~/__${board.name}__/__${page+1}__.html}" method="get">
                <input type="submit" value="Próximo"></input>
              </form>
              <span th:if="${page} == ${maxpages}">Próximo</span>
            </td>
            <td>Catálogo</td>
          </tr>
        </table>
        <div class="deltable">
          <table>
            <tr>
              <td>[<input type="checkbox" value="fileonly"></input>Deletar arquivo ]
              	<input type="submit" value="Deletar"></input>
              </td>
            </tr>
            <tr>
              <td>
                Motivo: <input type="text" name="reportreason" size="10" maxlength="255"></input>
                <input type="submit" value="Denunciar"></input>
              </td>
            </tr>
          </table>
        </div>
      </section>
      </form>
    </main>
    <nav class="navbottom">
      <ul th:each="section : ${boardList}" th:if="${not #lists.isEmpty(section.value)}">
        <li th:each="board : ${section.value}">
          <a th:href="@{~/__${board.name}__}" th:text="${board.name}"></a>
        </li>
      </ul>
    </nav>
    <footer>
      <p>asdasdasdasd <br/> asdasdasd</p>
    </footer>
  </body>
</html>